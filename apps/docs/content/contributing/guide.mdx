# 贡献指南

非常欢迎您对 YLiu Blog Engine 项目做出贡献！您的每一份贡献，无论是报告一个错误、提出一个功能建议，还是提交代码，都对这个项目意义重大。

## 如何贡献

我们鼓励通过以下方式为项目做出贡献：

### 报告 Bug

如果您在使用过程中发现了任何问题或 Bug，请不要犹豫，通过 [GitHub Issues](https://github.com/bosens-China/yliu-blog-engine/issues) 来报告它。

在提交 Bug 报告时，请尽可能提供以下信息：

- **清晰的标题**: 简要描述问题。
- **复现步骤**: 详细说明如何能重现这个 Bug。
- **期望的行为**: 描述在您看来，程序本应该如何工作。
- **实际的行为**: 描述实际发生了什么，并附上相关的错误日志或截图。
- **您的环境**: 提供您的操作系统、Node.js 版本等相关环境信息。

### 提出功能建议

如果您对项目有任何新的想法或功能建议，也欢迎通过 [GitHub Issues](https://github.com/bosens-China/yliu-blog-engine/issues) 提出。请为 Issue 打上 `enhancement` 标签。

在提交建议时，请说明：

- **您想解决什么问题？**: 描述您在使用中遇到的痛点或缺失的功能。
- **您的解决方案建议**: 清晰地描述您希望增加的功能是如何工作的。

### 提交 Pull Request

我们非常欢迎代码贡献！如果您希望修复一个 Bug 或实现一个新功能，请遵循以下流程：

1.  **Fork 仓库**: 将本项目 Fork 到您自己的 GitHub 账户下。
2.  **克隆您的 Fork**: `git clone https://github.com/YourUsername/yliu-blog-engine.git`
3.  **创建分支**: 从 `main` 分支创建一个新的特性分支，例如 `git checkout -b feature/amazing-new-feature`。
4.  **进行修改**: 在您的新分支上进行代码修改。
5.  **提交代码**: 确保您的提交信息清晰明了。
6.  **Push 到您的 Fork**: `git push origin feature/amazing-new-feature`
7.  **创建 Pull Request**: 回到原始项目仓库，创建一个新的 Pull Request，将您的特性分支合并到主项目的 `main` 分支。

在提交 Pull Request 时，请在描述中清晰地说明您做了哪些改动以及它们解决的问题。

感谢您为构建一个更好的 YLiu Blog Engine 所付出的努力！```

---

### **2. `contributing/architecture.mdx` (架构概览)**

这份文档面向有深度贡献意愿的开发者，帮助他们快速理解项目的内部工作原理和设计哲学。

**`apps/docs/content/contributing/architecture.mdx` (完整内容)**

```mdx
import { FileTree } from 'nextra/components';

# 架构概览

为了方便您进行二次开发或贡献代码，这里简要介绍本项目的核心架构和设计思想。

## Monorepo 结构

本项目采用 `pnpm` 工作空间 (workspaces) 构建的 Monorepo 结构，主要包含以下几个包：

<FileTree>
  <FileTree.Folder name="apps" defaultOpen>
    <FileTree.Folder name="web" defaultOpen>
      <FileTree.File name="next.config.js" />
      <FileTree.File name="..." />
      <FileTree.File name="说明：博客主应用 (Next.js)" />
    </FileTree.Folder>
    <FileTree.Folder name="docs" defaultOpen>
      <FileTree.File name="说明：本文档站 (Nextra)" />
    </FileTree.Folder>
  </FileTree.Folder>
  <FileTree.Folder name="packages" defaultOpen>
    <FileTree.Folder name="scripts" defaultOpen>
      <FileTree.File name="说明：核心数据处理脚本" />
    </FileTree.Folder>
    <FileTree.Folder name="types" defaultOpen>
      <FileTree.File name="说明：共享的 TypeScript 类型定义" />
    </FileTree.Folder>
  </FileTree.Folder>
</FileTree>

- **`apps/web`**: 最终的博客前端应用，负责展示内容。
- **`apps/docs`**: 您正在浏览的文档站。
- **`packages/scripts`**: **核心数据处理引擎**。负责拉取源数据、处理、增强，并生成最终的 `blog-data.json`。
- **`packages/types`**: 存放被 `scripts` 和 `web` 等多个包共享的 TypeScript 类型定义，作为它们之间的“数据契约”。

## `scripts` 包：插件化架构

`packages/scripts` 是本项目的发动机，我们没有采用简单的线性脚本，而是设计了一套灵活的、基于插件的流水线架构。

### 核心概念

- **Runner (执行器)**: 负责按顺序执行插件的生命周期钩子。
- **Context (上下文)**: 一个在所有插件之间共享的数据总线，插件通过读写 `Context` 来传递数据。
- **Plugin (插件)**: 一个实现了特定接口的对象，包含 `resource`, `transform`, `output` 等生命周期钩子。

### 构建流水线 (Pipeline)

构建过程被划分为三个明确的、串行执行的阶段：

1.  **Resource (资源获取)**
    - 此阶段的插件负责从外部获取原始数据。
    - 例如: `plugin-resource-github` 从 GitHub API 拉取 Issues 和仓库信息。
    - 产出物被放入 `context.dataSource`。

2.  **Transform (数据转换)**
    - 此阶段的插件负责对数据进行处理、转换和增强。这是一个串行的“流水线”作业。
    - `plugin-transform-posts`: 将 `GithubIssue` 转换为我们定义的 `Post` 结构。
    - `plugin-transform-images`: 处理文章内容中的图片，进行防盗链下载。
    - `plugin-transform-ai`: (可选) 调用 AI 服务对文章进行 SEO 增强和专栏分析。
    - `plugin-transform-apply-data`: 将所有处理结果（包括 AI 兜底）最终整合到 `Post` 对象和全局元数据中。
    - 此阶段在 `context.data` 中进行操作。

3.  **Output (产物输出)**
    - 此阶段的插件负责将最终处理好的数据写入文件系统。
    - `plugin-output-build`: 生成生产环境用的 `blog-data.json`。
    - `plugin-output-dev`: 生成开发调试用的中间文件。

### 扩展或修改

如果您想扩展功能，例如“从 Notion 拉取数据”，您只需要：

1.  创建一个 `plugins/resource-notion` 插件。
2.  在 `resource` 钩子中实现从 Notion API 拉取数据的逻辑。
3.  将原始数据写入 `context.dataSource.notion`。
4.  在 `transform-posts` 或一个新的 `transform` 插件中，处理这份新数据。
5.  在 `bin/build.ts` 的插件列表中添加您的新插件。

这种架构使得添加新功能或修改现有逻辑都变得非常清晰和低风险。
```
